<div class="max-w-2xl mx-auto">
  <%# Header %>
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-semibold text-gray-800">
      <%= @photo.taken_on.strftime("%B %-d, %Y") %>
    </h2>
    <div class="flex items-center gap-3">
      <%= link_to "← Back to calendar", calendar_month_path(year: @photo.taken_on.year, month: @photo.taken_on.month),
          class: "text-sm text-blue-600 hover:underline" %>
      <%= link_to "Edit photo", edit_photo_path(@photo),
          class: "text-sm text-gray-600 hover:underline" %>
      <%= button_to "Delete", photo_path(@photo), method: :delete,
          data: { turbo_confirm: "Delete this photo?" },
          class: "text-sm text-red-600 hover:underline cursor-pointer bg-transparent border-none p-0" %>
    </div>
  </div>

  <%# Full-size photo with nav arrows %>
  <div class="relative rounded overflow-hidden shadow-sm mb-6"
       data-controller="photo-nav"
       data-photo-nav-prev-url-value="<%= @prev_photo ? photo_path(@prev_photo) : '' %>"
       data-photo-nav-next-url-value="<%= @next_photo ? photo_path(@next_photo) : '' %>"
       data-action="keydown@window->photo-nav#handleKey
                    touchstart->photo-nav#touchStart
                    touchend->photo-nav#touchEnd">
    <%= image_tag @photo.image, class: "w-full", alt: @photo.taken_on.strftime("%B %-d, %Y") %>

    <% if @prev_photo %>
      <%= link_to photo_path(@prev_photo),
          class: "absolute left-0 inset-y-0 flex items-center px-3 bg-black/20 hover:bg-black/40 transition-colors",
          aria: { label: "Previous photo" } do %>
        <span class="text-white text-3xl leading-none select-none">‹</span>
      <% end %>
    <% end %>

    <% if @next_photo %>
      <%= link_to photo_path(@next_photo),
          class: "absolute right-0 inset-y-0 flex items-center px-3 bg-black/20 hover:bg-black/40 transition-colors",
          aria: { label: "Next photo" } do %>
        <span class="text-white text-3xl leading-none select-none">›</span>
      <% end %>
    <% end %>
  </div>

  <%# Prev/Next navigation %>
  <div class="flex items-center justify-between">
    <% if @prev_photo %>
      <%= link_to photo_path(@prev_photo), class: "flex flex-col items-center gap-1 group" do %>
        <div class="w-12 h-12 rounded overflow-hidden">
          <%= image_tag @prev_photo.image,
              class: "w-full h-full object-cover group-hover:opacity-80 transition-opacity",
              alt: @prev_photo.taken_on.strftime("%B %-d") %>
        </div>
        <span class="text-xs text-gray-500 group-hover:text-gray-800">← <%= @prev_photo.taken_on.strftime("%b %-d") %></span>
      <% end %>
    <% else %>
      <div></div>
    <% end %>

    <% if @next_photo %>
      <%= link_to photo_path(@next_photo), class: "flex flex-col items-center gap-1 group" do %>
        <div class="w-12 h-12 rounded overflow-hidden">
          <%= image_tag @next_photo.image,
              class: "w-full h-full object-cover group-hover:opacity-80 transition-opacity",
              alt: @next_photo.taken_on.strftime("%B %-d") %>
        </div>
        <span class="text-xs text-gray-500 group-hover:text-gray-800"><%= @next_photo.taken_on.strftime("%b %-d") %> →</span>
      <% end %>
    <% else %>
      <div></div>
    <% end %>
  </div>
</div>
